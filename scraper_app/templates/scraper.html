{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{% static 'css/scraper.css' %}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Oswald:wght@200..700&display=swap" rel="stylesheet">
    <script src="{% static 'scripts/scraper.js' %}"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
    function changeBackground(){
        // Neue Videoquelle
var oldSource = "{% static 'videos/background.mp4' %}";
 var newSource = "{% static 'videos/load (2).mp4' %}";
 // Videoelement und Quellen-Element ausw√§hlen
 var video = document.getElementById("video-background");
 var source = document.getElementById("video-source");
 var number = source.dataset.number;
 if (number == "old"){
 source["src"] = newSource;
 source.dataset.number ="new";
 }
 else{
    source["src"] = oldSource;
    source.dataset.number ="old";
 }
 video.load();
 }
 </script>
    <title>Webscraper</title>
</head>
<body>
    <video id="video-background" autoplay loop muted>
        <source id="video-source" src="{% static 'videos/background.mp4' %}" data-number="old"type="video/mp4">
      </video>
      
<div class="container">
    <div class="search">
        <p>Search for substances</p>
        <form action="" method="post" id="form">
        <select id="select" onchange="selectFunction() " name="select">
            <option value="SMILES">SMILES</option>
            <option value="summenformel">molecular formula</option>
            <option value="massebereich">molecular mass</option>
        </select>
            {% csrf_token %}
            <input type="search" id="search_field" name="search_field">
            <input type="number" id="abweichung" placeholder="Tolaranz +/-" step="0.1" form="form" name="abweichung">
            <input type="submit" value="search" id="submit_button">
        </form>
    </div>
    <div class="modi_div">
        <button class="modi" onclick="reset_db()">reset database</button>
        <button class="modi" onclick="load_new_substances()">load new substances </button>
        <button class="modi" onclick="changeBackground()">load new substances, look for data-changes </button>
</div>    
{%if selected != None%}
<div style="position: absolute; left: 40%; top: 1.1%; font-size: 25px; color: rgb(201, 214, 16); opacity: 0.5;"><h1>{{ answer|length }} {% if answer|length == 1 %}RESULT{% else %}RESULTS{% endif %}</h1></div>
{% endif %}
{% if selected == "SMILES" %}
<div class="answer">

        {% for substance in answer %}
        <ul>
        <li><strong>Names:</strong> {{ substance.names }}</li>
        <li><strong>IUPAC NAMES:</strong> {{ substance.iupac_names }}</li>
        <li><strong>ID:</strong> {{ substance.id }}</li>
        <li><strong>Formular:</strong> {{ substance.formular }}</li>
        <li><strong>Molecular Weight:</strong> {{ substance.molecular_weight}}</li>
        <li><strong>InChl:</strong> {{ substance.inchl }}</li>
        <li><strong>InChl Key:</strong> {{ substance.inchl_key }}</li>
        <li><strong>SMILES:</strong> {{ substance.smiles }}</li>
        <li><strong>Category Tag:</strong> {{ substance.category_tag}}</li>
    </ul>
    {% endfor %}
</div>
{% endif %}
<div class="show_witz"></div>
<div class="progress_message">Please wait until completion</div>
<div class="progressbar">
</div>
{% if selected == "massebereich" or selected == "summenformel" %}
<div class="show_massebereich">
{% for substance in answer %}
<div class="show_one">
    <ul>
        <li><strong>Names:</strong> {{ substance.names }}</li>
        <li><strong>IUPAC NAMES:</strong> {{ substance.iupac_names }}</li>
        <li><strong>ID:</strong> {{ substance.id }}</li>
        <li><strong>Formular:</strong> {{ substance.formular }}</li>
        <li><strong>Molecular Weight:</strong> {{ substance.molecular_weight}}</li>
        <li><strong>InChl:</strong> {{ substance.inchl }}</li>
        <li><strong>InChl Key:</strong> {{ substance.inchl_key }}</li>
        <li><strong>SMILES:</strong> {{ substance.smiles }}</li>
        <li><strong>Category Tag:</strong> {{ substance.category_tag}}</li>
    </ul>
</div>
{% endfor %}
</div>
{% endif %}
</div>

</body>
</html> 